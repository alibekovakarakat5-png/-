# üìã –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á—ë—Ç

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### 1. Backend - SQLite + –º–∏–≥—Ä–∞—Ü–∏–∏ ‚úÖ

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ schema.prisma:**
- ‚úÖ –£–±—Ä–∞–Ω—ã `@db.Text` (–Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ SQLite)
- ‚úÖ `Json` —Ç–∏–ø –∑–∞–º–µ–Ω—ë–Ω –Ω–∞ `String` –¥–ª—è `analysisJson`
- ‚úÖ Schema –≤–∞–ª–∏–¥–Ω–∞ –¥–ª—è SQLite

**–ú–∏–≥—Ä–∞—Ü–∏–∏:**
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω–∞: `backend/prisma/dev.db`
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞: `20251127094146_init`
- ‚úÖ Prisma Client —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω

**–ö–æ–¥:**
- ‚úÖ `CallService.ts` –æ–±–Ω–æ–≤–ª—ë–Ω - `analysisJson` —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç—Å—è –≤ JSON —Å—Ç—Ä–æ–∫—É

### 2. Frontend - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ import.meta.env ‚úÖ

**–§–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã:**
- ‚úÖ `src/vite-env.d.ts` - —Ç–∏–ø—ã –¥–ª—è Vite env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- ‚úÖ `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å `VITE_API_BASE_URL=http://localhost:8080/api`

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ `src/api/client.ts` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `import.meta.env.VITE_API_BASE_URL`
- ‚úÖ TypeScript –æ—à–∏–±–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞

### 3. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–æ–≤ ‚ö†Ô∏è

**Backend:**
- –ó–∞–ø—É—â–µ–Ω –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
- –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –Ω–∞ http://localhost:8080

**Frontend:**
- –ó–∞–ø—É—â–µ–Ω –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ  
- –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –Ω–∞ http://localhost:3000

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ backend

```powershell
# Health check
Invoke-WebRequest -Uri http://localhost:8080/api/health

# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏–∑ Bitrix
Invoke-WebRequest -Uri http://localhost:8080/api/calls/sync -Method POST

# –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–æ–≤
Invoke-WebRequest -Uri http://localhost:8080/api/calls
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ frontend

1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000 –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–ó–≤–æ–Ω–∫–∏"
3. –î–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –¥–∞–Ω–Ω—ã–µ –∏–∑ backend

##  –°—Ç–∞—Ç—É—Å —Ñ–∞–π–ª–æ–≤

- ‚úÖ `backend/prisma/dev.db` - —Å–æ–∑–¥–∞–Ω
- ‚úÖ `backend/prisma/schema.prisma` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –¥–ª—è SQLite
- ‚úÖ `src/vite-env.d.ts` - —Å–æ–∑–¥–∞–Ω
- ‚úÖ `.env` (frontend) - —Å–æ–∑–¥–∞–Ω
- ‚úÖ `backend/src/services/CallService.ts` - –æ–±–Ω–æ–≤–ª—ë–Ω –¥–ª—è SQLite

## ‚ö†Ô∏è –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### Backend –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–ø—É—â–µ–Ω: `Get-Process node`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≥–¥–µ –∑–∞–ø—É—â–µ–Ω backend
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–æ—Ä—Ç 8080 —Å–≤–æ–±–æ–¥–µ–Ω
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `backend/.env` –∑–∞–ø–æ–ª–Ω–µ–Ω—ã

### Frontend –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ backend –∑–∞–ø—É—â–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ backend
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `VITE_API_BASE_URL` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π

### –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö:
1. –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é: `POST /api/calls/sync`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `BITRIX_WEBHOOK_URL` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ webhook –≤ Bitrix24
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ backend



1. ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ (SQLite)
2. ‚úÖ Frontend –∏—Å–ø—Ä–∞–≤–ª–µ–Ω (import.meta.env)
3. ‚è≥ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ backend –æ—Ç–≤–µ—á–∞–µ—Ç
4. ‚è≥ –í—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –∏–∑ Bitrix
5. ‚è≥ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

